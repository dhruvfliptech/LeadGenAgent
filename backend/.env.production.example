# Production Environment Configuration for CraigLeads Pro Backend
# Use this template for Railway, Render, or Heroku deployment
#
# IMPORTANT SECURITY NOTES:
# 1. NEVER commit actual production values to git
# 2. Generate unique SECRET_KEY for each environment
# 3. Use strong passwords for all services
# 4. Enable SSL/TLS for all connections
# 5. Rotate keys regularly

# ==============================================================================
# APPLICATION CONFIGURATION
# ==============================================================================

# Environment mode - MUST be 'production' for live deployment
ENVIRONMENT=production

# Debug mode - MUST be false in production for security
DEBUG=false

# Log level - INFO for production, DEBUG for troubleshooting
LOG_LEVEL=INFO

# API configuration
API_V1_STR=/api/v1
PROJECT_NAME=CraigLeads Pro
VERSION=1.0.0

# ==============================================================================
# SECURITY CONFIGURATION (CRITICAL)
# ==============================================================================

# Secret key for JWT tokens - MUST be unique and secure
# Generate with: openssl rand -hex 32
# NEVER use the same key across environments
SECRET_KEY=CHANGE_THIS_TO_A_SECURE_RANDOM_VALUE_USE_OPENSSL_RAND_HEX_32

# JWT token expiration (in minutes)
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ==============================================================================
# CORS CONFIGURATION (CRITICAL)
# ==============================================================================

# Allowed hosts for CORS - MUST be your actual frontend domains
# NO wildcards (*) in production!
# Format: JSON array of strings
# Example: ["https://app.yourdomain.com", "https://yourdomain.com"]
ALLOWED_HOSTS=["https://your-app.netlify.app"]

# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================

# PostgreSQL connection string
# Auto-set by Railway/Render, or set manually:
# Format: postgresql://user:password@host:port/database
# Railway: Auto-set as DATABASE_URL
# Render: Auto-set from database add-on
# Manual: postgresql://postgres:your-password@your-host:5432/craigleads
DATABASE_URL=postgresql://postgres:password@localhost:5432/craigleads

# Connection pool settings - adjust based on your plan
# Free/Hobby plans: 10-20
# Production plans: 20-50
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=30

# Connection timeout (seconds)
DATABASE_CONNECT_TIMEOUT=30

# ==============================================================================
# REDIS CONFIGURATION
# ==============================================================================

# Redis connection string
# Auto-set by Railway/Render, or set manually:
# Format: redis://host:port/db or redis://user:password@host:port/db
# Railway: Auto-set as REDIS_URL
# Render: Auto-set from Redis add-on
# Manual: redis://your-host:6379/0
REDIS_URL=redis://localhost:6379

# Redis database number
REDIS_DB=0

# Redis connection pool settings
REDIS_MAX_CONNECTIONS=50

# ==============================================================================
# AI SERVICES (Choose at least one)
# ==============================================================================

# OpenAI API configuration
# Get key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=2000

# Anthropic Claude API (alternative to OpenAI)
# Get key from: https://console.anthropic.com/
# ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key-here
# ANTHROPIC_MODEL=claude-3-sonnet-20240229

# AI provider selection (openai or anthropic)
AI_PROVIDER=openai

# ==============================================================================
# EMAIL CONFIGURATION (Choose one method)
# ==============================================================================

# Method 1: Postmark (Recommended for production)
# Get token from: https://postmarkapp.com/
# POSTMARK_SERVER_TOKEN=your-postmark-server-token

# Method 2: SMTP (Gmail, SendGrid, etc.)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM_EMAIL=your-email@gmail.com
SMTP_FROM_NAME=CraigLeads Pro

# Email settings
SMTP_USE_TLS=true
SMTP_USE_SSL=false

# ==============================================================================
# USER PROFILE (For email personalization)
# ==============================================================================

USER_NAME=Your Company Name
USER_EMAIL=contact@yourdomain.com
USER_PHONE=+1-555-0123
USER_COMPANY=Your Company

# ==============================================================================
# WEB SCRAPING CONFIGURATION
# ==============================================================================

# Scraping delays (in seconds) - prevent rate limiting
SCRAPER_DELAY_MIN=1.0
SCRAPER_DELAY_MAX=3.0

# Maximum concurrent scraping jobs
SCRAPER_CONCURRENT_LIMIT=5

# User agent for web requests
SCRAPER_USER_AGENT=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36

# Timeout for HTTP requests (seconds)
SCRAPER_TIMEOUT=30

# Maximum retries for failed requests
SCRAPER_MAX_RETRIES=3

# ==============================================================================
# LINKEDIN INTEGRATION (Optional)
# ==============================================================================

# Enable LinkedIn job scraping
LINKEDIN_ENABLED=true

# LinkedIn service: piloterr, scraperapi, or selenium
# Recommended: piloterr (most reliable)
LINKEDIN_SERVICE=piloterr

# Piloterr API key (Recommended)
# Sign up: https://www.piloterr.com
# Free trial: 50 credits
# LINKEDIN_API_KEY=your-piloterr-api-key

# ScraperAPI key (Alternative)
# Sign up: https://www.scraperapi.com
# LINKEDIN_API_KEY=your-scraperapi-key

# LinkedIn scraping limits
LINKEDIN_MAX_RESULTS_PER_SEARCH=100
LINKEDIN_RATE_LIMIT_PER_MINUTE=60
LINKEDIN_TIMEOUT_SECONDS=30
LINKEDIN_RETRY_MAX_ATTEMPTS=3

# LinkedIn data storage
LINKEDIN_STORE_IN_LEADS_TABLE=true
LINKEDIN_DEDUPE_BY_URL=true

# ==============================================================================
# GOOGLE MAPS SCRAPING (Optional)
# ==============================================================================

# Enable Google Maps business scraping
GOOGLE_MAPS_ENABLED=true

# SerpAPI key for Google Maps data
# Sign up: https://serpapi.com/
# Free tier: 100 searches/month
# GOOGLE_MAPS_API_KEY=your-serpapi-key

# ==============================================================================
# EMAIL EXTRACTION (Optional)
# ==============================================================================

# Enable email extraction from websites
ENABLE_EMAIL_EXTRACTION=false

# 2Captcha API key for solving CAPTCHAs
# Sign up: https://2captcha.com/
# Only needed if extracting emails from protected pages
# TWOCAPTCHA_API_KEY=your-2captcha-api-key

# ==============================================================================
# RATE LIMITING
# ==============================================================================

# API rate limit per minute (per IP)
RATE_LIMIT_PER_MINUTE=100

# Rate limit for scraping endpoints
SCRAPER_RATE_LIMIT_PER_MINUTE=20

# ==============================================================================
# CELERY (Background Tasks)
# ==============================================================================

# Celery broker URL (uses Redis)
CELERY_BROKER_URL=${REDIS_URL}

# Celery result backend (uses Redis)
CELERY_RESULT_BACKEND=${REDIS_URL}

# Celery worker concurrency
CELERY_WORKER_CONCURRENCY=4

# Task time limits (seconds)
CELERY_TASK_TIME_LIMIT=3600
CELERY_TASK_SOFT_TIME_LIMIT=3000

# ==============================================================================
# FILE STORAGE
# ==============================================================================

# Directory for exports, uploads, logs
# Railway/Render: Use relative path
# Self-hosted: Use absolute path
EXPORT_DIRECTORY=./storage/exports
UPLOAD_DIRECTORY=./storage/uploads
LOG_DIRECTORY=./logs

# Export settings
EXPORT_MAX_RECORDS=100000
EXPORT_CLEANUP_DAYS=30
EXPORT_COMPRESSION_LEVEL=6

# Maximum upload file size (bytes) - 10MB
MAX_UPLOAD_SIZE=10485760

# ==============================================================================
# VIDEO SERVICES (Phase 4 - Optional)
# ==============================================================================

# ElevenLabs API for voice synthesis
# Sign up: https://elevenlabs.io/
# Free tier: 10,000 characters/month
# ELEVENLABS_API_KEY=your-elevenlabs-api-key
# ELEVENLABS_VOICE_ID=default-voice-id

# AWS S3 for video hosting (alternative to local storage)
# AWS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret-key
# AWS_S3_BUCKET=your-bucket-name
# AWS_REGION=us-east-1

# ==============================================================================
# N8N WORKFLOW AUTOMATION (Optional)
# ==============================================================================

# N8N webhook integration
# N8N_WEBHOOK_URL=https://your-n8n-instance.com/webhook
# N8N_API_KEY=your-n8n-api-key

# Enable automatic workflow triggers
N8N_ENABLED=false

# ==============================================================================
# MONITORING & LOGGING
# ==============================================================================

# Log format: json or text
LOG_FORMAT=json

# Enable SQL query logging (disable in production for performance)
LOG_SQL_QUERIES=false

# Sentry error tracking (recommended for production)
# Sign up: https://sentry.io/
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Enable performance monitoring
ENABLE_PERFORMANCE_MONITORING=true

# ==============================================================================
# PERFORMANCE TUNING
# ==============================================================================

# Uvicorn workers (1-2x CPU cores)
# Railway Hobby: 2-4
# Railway Pro: 4-8
WEB_CONCURRENCY=4

# Request timeout (seconds)
REQUEST_TIMEOUT=60

# Enable response compression
ENABLE_COMPRESSION=true

# Cache TTL (seconds)
CACHE_TTL=3600

# ==============================================================================
# SECURITY HEADERS
# ==============================================================================

# Enable security headers
ENABLE_SECURITY_HEADERS=true

# Content Security Policy
CSP_ENABLED=true

# HSTS max age (seconds) - 1 year
HSTS_MAX_AGE=31536000

# ==============================================================================
# FEATURE FLAGS
# ==============================================================================

# Enable specific features in production
ENABLE_CRAIGSLIST_SCRAPER=true
ENABLE_LINKEDIN_SCRAPER=true
ENABLE_GOOGLE_MAPS_SCRAPER=true
ENABLE_JOB_BOARDS=true
ENABLE_AI_FEATURES=true
ENABLE_VIDEO_FEATURES=false
ENABLE_CAMPAIGN_MANAGEMENT=true
ENABLE_CONVERSATION_AI=true
ENABLE_EMAIL_TRACKING=true

# ==============================================================================
# DEPLOYMENT METADATA (Optional)
# ==============================================================================

# Deployment platform
DEPLOYMENT_PLATFORM=railway

# Git commit hash (auto-set by CI/CD)
# GIT_COMMIT_SHA=${RAILWAY_GIT_COMMIT_SHA}

# Build timestamp (auto-set by CI/CD)
# BUILD_TIMESTAMP=${RAILWAY_DEPLOYMENT_TIMESTAMP}

# ==============================================================================
# VALIDATION CHECKLIST
# ==============================================================================
#
# Before deploying to production, ensure:
#
# Critical Settings:
# [ ] ENVIRONMENT=production
# [ ] DEBUG=false
# [ ] SECRET_KEY is unique and secure (min 32 chars)
# [ ] ALLOWED_HOSTS contains only your actual domains (no wildcards)
# [ ] DATABASE_URL points to production database
# [ ] REDIS_URL points to production Redis
#
# Security:
# [ ] All passwords are strong and unique
# [ ] SSL/TLS enabled for all connections
# [ ] Rate limiting enabled
# [ ] Security headers enabled
# [ ] CORS properly configured
#
# Services:
# [ ] At least one AI provider configured (OpenAI or Anthropic)
# [ ] Email service configured (Postmark or SMTP)
# [ ] All required API keys set
# [ ] Background workers configured (Celery)
#
# Performance:
# [ ] Connection pool sizes appropriate for your plan
# [ ] Worker count matches available CPU cores
# [ ] Caching enabled
# [ ] Logging configured appropriately
#
# Monitoring:
# [ ] Error tracking configured (Sentry recommended)
# [ ] Performance monitoring enabled
# [ ] Log aggregation set up
# [ ] Health check endpoint accessible
#
# ==============================================================================
# ENVIRONMENT-SPECIFIC NOTES
# ==============================================================================
#
# Railway:
# - DATABASE_URL and REDIS_URL auto-set by database add-ons
# - Use $PORT environment variable (auto-set)
# - Private networking available between services
# - Automatic HTTPS for all deployments
#
# Render:
# - Use render.yaml for infrastructure as code
# - Environment groups for shared variables
# - Automatic HTTPS and SSL certificates
# - Health check endpoint required
#
# Heroku:
# - Use Procfile for process types
# - Use heroku addons for PostgreSQL and Redis
# - Dyno types: web, worker, beat
# - Use Heroku Config for environment variables
#
# ==============================================================================
