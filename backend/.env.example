# Environment Configuration Example
# Copy this file to .env and fill in your actual values
# SECURITY WARNING: Never commit your .env file to version control!

# Environment
ENVIRONMENT=development
DEBUG=true

# Database Configuration
# Reduced pool sizes to prevent "too many clients" errors
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/craigslist_leads
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=10

# Redis Configuration (REQUIRED)
# For production, use a proper Redis instance (not hardcoded credentials!)
REDIS_URL=redis://localhost:6379
REDIS_DB=0

# Security (REQUIRED for production)
# Generate a secure random key: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=your-secret-key-here-change-in-production
ACCESS_TOKEN_EXPIRE_MINUTES=30

# CORS Configuration
# Comma-separated list of allowed origins (NO wildcards in production!)
ALLOWED_HOSTS=http://localhost:3000,http://localhost:5173,http://localhost:5174

# Scraping Settings
SCRAPER_DELAY_MIN=1.0
SCRAPER_DELAY_MAX=3.0
SCRAPER_CONCURRENT_LIMIT=5
SCRAPER_USER_AGENT=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36

# CAPTCHA & Email Extraction Settings
TWOCAPTCHA_API_KEY=
CAPTCHA_TIMEOUT=120
CAPTCHA_MAX_RETRIES=3
ENABLE_EMAIL_EXTRACTION=false
EMAIL_EXTRACTION_MAX_CONCURRENT=2

# Rate Limiting
RATE_LIMIT_PER_MINUTE=60

# Logging
LOG_LEVEL=INFO

# AI Integration Settings (Optional)
AI_PROVIDER=openai
OPENAI_API_KEY=

# ===== Phase 4: Video Creation System =====

# ElevenLabs Voice Synthesis (REQUIRED for voiceovers)
ELEVENLABS_API_KEY=your_elevenlabs_api_key_here
ELEVENLABS_VOICE_ID=21m00Tcm4TlvDq8ikWAM  # Rachel voice (default)
ELEVENLABS_MODEL_ID=eleven_multilingual_v2
ELEVENLABS_VOICE_PROFESSIONAL_MALE=21m00Tcm4TlvDq8ikWAM
ELEVENLABS_VOICE_PROFESSIONAL_FEMALE=EXAVITQu4vr4xnSDxMaL
ELEVENLABS_VOICE_CASUAL_MALE=TxGEqnHWrfWFTfGW9XjX
ELEVENLABS_VOICE_CASUAL_FEMALE=jsCqWAovK2LkecY7zXl4

# Video Storage Paths
VIDEO_STORAGE_PATH=backend/storage/videos
RECORDING_STORAGE_PATH=backend/storage/recordings
VOICEOVER_STORAGE_PATH=backend/storage/voiceovers
THUMBNAIL_STORAGE_PATH=backend/storage/thumbnails

# Video Recording Settings
VIDEO_DEFAULT_RESOLUTION=1920x1080
VIDEO_DEFAULT_FPS=30
VIDEO_MAX_DURATION_SECONDS=600
RECORDING_QUALITY=high  # low, medium, high, ultra

# Video Composition Settings
VIDEO_WATERMARK_ENABLED=false
VIDEO_WATERMARK_TEXT=
VIDEO_LOGO_PATH=
VIDEO_PRESET=fast  # ultrafast, fast, medium, slow, veryslow
VIDEO_CRF=23  # 18-28 (lower = better quality, larger file)
GENERATE_QUALITY_VERSIONS=true
VIDEO_QUALITY_VERSIONS=1080p,720p,480p

# Voiceover Settings
VOICEOVER_CACHE_ENABLED=true
VOICEOVER_CACHE_TTL_DAYS=30
VOICEOVER_DEFAULT_FORMAT=mp3
VOICEOVER_SAMPLE_RATE=44100
VOICEOVER_MERGE_SECTIONS=true
VOICEOVER_SECTION_PAUSE_MS=500

# AWS S3 Video Hosting (REQUIRED for video hosting)
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_S3_BUCKET=your-video-bucket-name
AWS_S3_REGION=us-east-1
AWS_CLOUDFRONT_ENABLED=true
AWS_CLOUDFRONT_DISTRIBUTION_ID=

# ===== Phase 6: N8N Workflow Automation =====

# N8N Integration (REQUIRED for workflow automation)
# For self-hosted: http://localhost:5678/api/v1
# For N8N Cloud: https://your-instance.app.n8n.cloud/api/v1
N8N_API_URL=http://localhost:5678/api/v1
N8N_API_KEY=your_n8n_api_key_here
N8N_WEBHOOK_SECRET=your_webhook_secret_here

# Workflow Execution Settings
WORKFLOW_MAX_RETRIES=3
WORKFLOW_RETRY_DELAY_SECONDS=60
WORKFLOW_EXECUTION_TIMEOUT_SECONDS=300
WORKFLOW_APPROVAL_TIMEOUT_HOURS=24

# Auto-Approval Settings
AUTO_APPROVAL_ENABLED=true
AUTO_APPROVAL_CONFIDENCE_THRESHOLD=90
AUTO_APPROVAL_MAX_DAILY_LIMIT=100

# Webhook Processing
WEBHOOK_QUEUE_BATCH_SIZE=10
WEBHOOK_PROCESSING_INTERVAL_SECONDS=30
WEBHOOK_RETRY_INTERVAL_SECONDS=300

# Monitoring & Cleanup
MONITORING_EVENT_RETENTION_DAYS=30
APPROVAL_EXPIRATION_CHECK_HOURS=1
WORKFLOW_SYNC_INTERVAL_MINUTES=30

# ===== Celery Configuration (for background tasks) =====

# Celery Broker (use Redis)
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# Celery Workers
CELERY_WORKER_CONCURRENCY=4
CELERY_TASK_TIME_LIMIT=600
CELERY_TASK_SOFT_TIME_LIMIT=540

# Loom Integration (Optional - alternative to S3)
LOOM_API_KEY=
LOOM_WORKSPACE_ID=
LOOM_FOLDER_ID=

# Video Analytics
VIDEO_ANALYTICS_ENABLED=true
VIDEO_TRACK_DETAILED_VIEWS=true
VIDEO_TRACK_ENGAGEMENT=true

# Performance & Optimization
VIDEO_PARALLEL_PROCESSING=true
VIDEO_MAX_CONCURRENT_JOBS=5
VIDEO_COMPOSITION_TIMEOUT_SECONDS=300
VIDEO_UPLOAD_TIMEOUT_SECONDS=600
ANTHROPIC_API_KEY=
AI_MAX_TOKENS=500
AI_TEMPERATURE=0.7
AI_TIMEOUT_SECONDS=30

# User Profile Settings (for response generation)
# REQUIRED: No fake data will be used! Must set these for response generation.
USER_NAME=
USER_EMAIL=
USER_PHONE=

# Optional - enhances response personalization
USER_PROFESSION=
USER_YEARS_EXPERIENCE=
USER_SKILLS=
USER_PORTFOLIO_URL=
USER_LINKEDIN_URL=
USER_GITHUB_URL=

# Phase 4: ElevenLabs Voice Synthesis Settings (Task 2)
# Get API key from: https://elevenlabs.io/
# Free tier: 10k characters/month, Starter: $5/mo (30k), Pro: $99/mo (500k)
ELEVENLABS_ENABLED=false
ELEVENLABS_API_KEY=
ELEVENLABS_MODEL_ID=eleven_multilingual_v2
ELEVENLABS_TIMEOUT_SECONDS=60
ELEVENLABS_MAX_RETRIES=3
ELEVENLABS_CONCURRENT_LIMIT=3

# Voiceover Storage Settings
VOICEOVER_STORAGE_PATH=./storage/voiceovers
VOICEOVER_CACHE_ENABLED=true
VOICEOVER_CACHE_EXPIRY_DAYS=30
VOICEOVER_DEFAULT_VOICE_PRESET=professional_female

# ============================================================================
# EMAIL SENDING INFRASTRUCTURE (Campaign Management)
# ============================================================================

# Email provider: smtp, sendgrid, mailgun, resend
EMAIL_PROVIDER=smtp

# SMTP Configuration (for Gmail, Outlook, or custom SMTP servers)
# Gmail: smtp.gmail.com:587, Outlook: smtp-mail.outlook.com:587
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password-here
SMTP_USE_TLS=true
SMTP_USE_SSL=false

# Third-party Email API Keys (paste when ready to use)
SENDGRID_API_KEY=
MAILGUN_API_KEY=
MAILGUN_DOMAIN=
RESEND_API_KEY=

# Email Sender Settings
EMAIL_FROM=noreply@fliptechpro.com
EMAIL_FROM_NAME=FlipTech Pro
EMAIL_REPLY_TO=support@fliptechpro.com

# Email Tracking Configuration
TRACKING_DOMAIN=http://localhost:8000
TRACKING_PIXEL_ENABLED=true
LINK_TRACKING_ENABLED=true

# Rate Limiting & Batch Settings
MAX_EMAILS_PER_HOUR=100
MAX_EMAILS_PER_DAY=1000
BATCH_SIZE=50
BATCH_DELAY_SECONDS=1

# Retry & Error Handling
MAX_RETRIES=3
RETRY_DELAY_SECONDS=5
BOUNCE_CHECK_ENABLED=true
MAX_BOUNCE_COUNT=3

# Testing & Debugging
# TEST_MODE: If true, emails logged to console instead of sent
TEST_MODE=false
# DEBUG_EMAIL_OVERRIDE: Override all recipients (for testing)
DEBUG_EMAIL_OVERRIDE=

# ============================================================================
# LINKEDIN CONTACT IMPORT + MESSAGING INTEGRATION
# ============================================================================

# Enable LinkedIn contact import and messaging features
LINKEDIN_CONTACTS_ENABLED=true

# LinkedIn OAuth 2.0 Credentials
# Get these from: https://www.linkedin.com/developers/apps
# 1. Create a LinkedIn App
# 2. Configure OAuth 2.0 settings
# 3. Add redirect URI: http://localhost:8000/api/v1/linkedin/oauth/callback
# 4. Copy Client ID and Client Secret
LINKEDIN_CLIENT_ID=
LINKEDIN_CLIENT_SECRET=

# OAuth Redirect URI (update for production)
LINKEDIN_REDIRECT_URI=http://localhost:8000/api/v1/linkedin/oauth/callback

# Rate Limiting (LinkedIn API Limits)
# LinkedIn allows approximately 100 messages per day per account
# Adjust based on your LinkedIn account type and approval status
LINKEDIN_DAILY_MESSAGE_LIMIT=100
LINKEDIN_RATE_LIMIT_PER_MINUTE=30

# Message Queue Settings
LINKEDIN_QUEUE_ENABLED=true
LINKEDIN_QUEUE_PROCESS_INTERVAL_MINUTES=5
LINKEDIN_MESSAGE_STAGGER_MINUTES=5

# CSV Import Settings
LINKEDIN_IMPORT_BATCH_SIZE=500
LINKEDIN_IMPORT_DEDUPLICATE_BY=linkedin_url  # linkedin_url, email, or name
LINKEDIN_AUTO_CREATE_LEADS=true

# Security
# WARNING: OAuth tokens are stored in database
# In production, implement token encryption at rest
LINKEDIN_TOKEN_ENCRYPTION_KEY=
